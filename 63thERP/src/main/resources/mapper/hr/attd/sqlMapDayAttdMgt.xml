<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.seoulit.erp.hr.attd.dao.DayAttdMgtDAO">
	

	
	<resultMap type="kr.co.seoulit.erp.hr.attd.to.DayAttdMgtTO" id="dayAttdMgtResult">
		<result property="empCode" column="EMP_CODE" />
		<result property="empName" column="EMP_NAME" />
		<result property="applyDays" column="APPLY_DAYS" />
		<result property="dayAttdCode" column="DAY_ATTD_CODE" />
		<result property="dayAttdName" column="DAY_ATTD_NAME" />
		<result property="attendTime" column="ATTEND_TIME" />
		<!-- <result property="HalfHolidayStatus" column="HALF_HOLIDAY_STATUS" /> -->
		<result property="quitTime" column="QUIT_TIME" />
		<result property="lateWhether" column="LATE_WHETHER" />
		<result property="leaveHour" column="LEAVE_HOUR" />
		<result property="workHour" column="WORK_HOUR" />
		<!-- <result property="earlyLeaveHour" column="EARLY_LEAVE_HOUR" /> -->
		<result property="overWorkHour" column="OVER_WORK_HOUR" />
		<result property="nightWorkHour" column="NIGHT_WORK_HOUR" />
		<result property="finalizeStatus" column="FINALIZE_STATUS" />
	</resultMap>
	
<!-- 	<parameterMap type="hashmap" id="dayAttdMgtInsertParameter" >
      <parameter property="applyDay" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN" />
      <parameter property="result" jdbcType="CURSOR" javaType="java.sql.ResultSet" mode="OUT" resultMap="dayAttdMgtResult" />
     <parameter property="errorCode" jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT" />
     <parameter property="errorMsg" jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT" />
	</parameterMap>	 -->
	
	<select id="batchDayAttdMgtProcesses" resultMap="dayAttdMgtResult" parameterType="map">
	
	SELECT
	
	*
	
	FROM DAY_ATTD_MANAGE D,EMPLOYEE_BASIC E
	
	WHERE D.APPLY_DAYS = #{applyDay}
	
	AND FINALIZE_STATUS='N'
	
	AND D.EMP_CODE=E.EMP_CODE
	 
	 <if test="!name.equals('')||!name.equals(null)">
            
    AND E.EMP_NAME LIKE '%'||#{name}||'%'
           
    </if>
	
	
	
	</select>
	
	
	<select id="selectDayAttdMgtProcessAll" resultMap="dayAttdMgtResult" parameterType="map">
	SELECT
	*
	FROM DAY_ATTD_MANAGE D,EMPLOYEE_BASIC E
	
	WHERE D.EMP_CODE=E.EMP_CODE
	
	AND D.APPLY_DAYS BETWEEN #{startDate} and #{endDate}
	
	

	
	
	
	</select>
	
	
	
	<update id="updateDayAttdMgtList" parameterType="kr.co.seoulit.erp.hr.attd.to.DayAttdMgtTO">
		<![CDATA[
			UPDATE DAY_ATTD_MANAGE 
			SET FINALIZE_STATUS = #{finalizeStatus}
			WHERE EMP_CODE = #{empCode}
			AND APPLY_DAYS = #{applyDays}
    	]]>
	</update>
	
	
	<update id="CanCelDayAttdMgtList" parameterType="kr.co.seoulit.erp.hr.attd.to.DayAttdMgtTO">
		<![CDATA[
			UPDATE DAY_ATTD_MANAGE 
			SET FINALIZE_STATUS = #{finalizeStatus}
			WHERE EMP_CODE = #{empCode}
			AND APPLY_DAYS = #{applyDays}
    	]]>
	</update>
	
</mapper>